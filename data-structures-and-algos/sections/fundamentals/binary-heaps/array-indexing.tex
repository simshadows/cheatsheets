\subsubsection{Array Indexing}

For \myul{0-indexed arrays}, given an index $i$, we can find the indices of its left child $c_1$, right child $c_2$, and parent $p$ with:
\begin{equation*}
    \boxed{
        %\vphantom{I'}
        \quad
        c_1 = 2 i + 1
        \qquad\qquad
        c_2 = c_1 + 1
        \qquad\qquad
        p = \floor*{\frac{i - 1}{2}}
        \quad
    }
\end{equation*}

To quickly derive these equations, let's try using a $1$-indexed array:
\begin{figure}[H]
    \centering
    \begin{tikzpicture}[
        array/.style={
            matrix of nodes,
            nodes={draw, minimum size=7mm, fill=mygreen!30},
            column sep=-\pgflinewidth,
            row sep=0.5mm,
            nodes in empty cells,
            row 1/.style={
                nodes={draw=none, fill=none, minimum size=5mm, color=myred}
            },
            row 2 column 1/.style={nodes={fill=myyellow!40}},
            row 2 column 2/.style={nodes={fill=myblue!30}},
            row 2 column 3/.style={nodes={fill=myblue!30}},
            row 2 column 4/.style={nodes={fill=myred!30}},
            row 2 column 5/.style={nodes={fill=myred!30}},
            row 2 column 6/.style={nodes={fill=myred!30}},
            row 2 column 7/.style={nodes={fill=myred!30}}
        }
    ]
        % Ugh, I keep getting errors if I use '&', so I'm forced to use
        % '\pgfmatrixnextcell' instead.
        \matrix[array] (array) {
            $1$
                \pgfmatrixnextcell $2$
                \pgfmatrixnextcell $3$
                \pgfmatrixnextcell $4$
                \pgfmatrixnextcell $5$
                \pgfmatrixnextcell $6$
                \pgfmatrixnextcell $7$
                \pgfmatrixnextcell $8$
                \pgfmatrixnextcell $9$
                \pgfmatrixnextcell $10$
                \pgfmatrixnextcell $11$
                \pgfmatrixnextcell $12$ \\
            $94$
                \pgfmatrixnextcell $87$
                \pgfmatrixnextcell $81$
                \pgfmatrixnextcell $57$
                \pgfmatrixnextcell $68$
                \pgfmatrixnextcell $74$
                \pgfmatrixnextcell $5$
                \pgfmatrixnextcell $35$
                \pgfmatrixnextcell $36$
                \pgfmatrixnextcell $29$
                \pgfmatrixnextcell $41$
                \pgfmatrixnextcell $18$ \\
        };
    \end{tikzpicture}
    \caption{Array implementation of \cref{fig:fundamentals--binary-heaps--first-example} with a 1-indexed array.}%
    \label{fig:fundamentals--binary-heaps--1indexed-example}
\end{figure}

With 1-indexing, the pattern is much more obvious. Using $i'$, $c'_1$, $c'_2$, and $p'$ as our 1-indexed array indices, we observe that the following are true:
\begin{gather*}
    c'_1 = 2 i'
    \qquad\qquad
    c'_2 = c'_1 + 1
    \qquad\qquad
    p' = \floor*{\frac{i'}{2}}
\end{gather*}

To convert back to 0-indexing, we apply $i' = i + 1$ and such:
\begin{gather*}
    \begin{aligned}
        \parens*{c_1 + 1} &= 2 \parens*{i + 1} \\
        c_1 + 1 &= 2 i + 2 \\
        c_1 &= 2 i + 1
    \end{aligned}
    \qquad\qquad
    \begin{aligned}
        \parens*{c_2 + \xcancel{1}} &= \parens*{c_1 + \xcancel{1}} + 1 \\
        c_2 &= c_1 + 1
    \end{aligned}
    \qquad\qquad
    \begin{aligned}
        p + 1 &= \floor*{\frac{i + 1}{2}} \\
        p &= \floor*{\frac{i + 1 - 2}{2}} = \floor*{\frac{i - 1}{2}}
    \end{aligned}
\end{gather*}

\Todo{Is there a good intuition behind these equations?}

\Todo{Discuss left/right-shift's role in implementing array indexing.}

